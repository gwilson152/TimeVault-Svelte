## Data Table Styling

Use these consistent data table styles for tabular data across the application:

### Basic Table Structure
```html
<div class="overflow-hidden">
  <table class="data-table">
    <thead class="data-table-header">
      <tr>
        <th>Column 1</th>
        <th class="right-aligned">Column 2</th>
      </tr>
    </thead>
    <tbody>
      {#each items as item}
        <tr class="data-table-row">
          <td>{item.name}</td>
          <td class="right-aligned">{item.value}</td>
        </tr>
      {/each}
    </tbody>
    <tfoot class="data-table-footer">
      <tr>
        <td>Totals</td>
        <td class="right-aligned">{totalValue}</td>
      </tr>
    </tfoot>
  </table>
</div>
```

### Available Classes

#### Container Classes
- `data-table`: Base table styling with full width and proper border spacing
- `data-table-header`: Header row styling with dark background
- `data-table-row`: Row styling with hover effects and borders
- `data-table-footer`: Footer styling for totals/summary rows

#### Cell and Alignment Classes
- `right-aligned`: Right-align content in columns (apply to th/td)

#### Table Action Buttons
- `table-action-button-primary`: Blue-styled action button for edit/view
- `table-action-button-danger`: Red-styled action button for delete/remove

### Best Practices
1. Always wrap tables in a container with `overflow-hidden` to maintain rounded corners
2. Use proper semantic thead, tbody, and tfoot elements
3. Right-align numeric columns with the `right-aligned` class
4. Add proper vertical padding to cells for readability
5. Group actions in a dedicated column
6. Use table footers for totals or summary information
7. Apply consistent action button styling

### Example Usage:
```html
<div class="overflow-hidden">
  <table class="data-table">
    <thead class="data-table-header">
      <tr>
        <th>Description</th>
        <th>Date</th>
        <th class="right-aligned">Amount</th>
        <th class="right-aligned">Actions</th>
      </tr>
    </thead>
    <tbody>
      {#each entries as entry}
        <tr class="data-table-row">
          <td>{entry.description}</td>
          <td>{formatDate(entry.date)}</td>
          <td class="right-aligned">{formatCurrency(entry.amount)}</td>
          <td class="right-aligned">
            <div class="flex justify-end gap-2">
              <button 
                class="table-action-button-primary"
                on:click={() => editEntry(entry.id)}
              >
                Edit
              </button>
              <button 
                class="table-action-button-danger"
                on:click={() => deleteEntry(entry.id)}
              >
                Delete
              </button>
            </div>
          </td>
        </tr>
      {/each}
    </tbody>
    <tfoot class="data-table-footer">
      <tr>
        <td colspan="2">Total</td>
        <td class="right-aligned">{formatCurrency(totalAmount)}</td>
        <td></td>
      </tr>
    </tfoot>
  </table>
</div>
```

# TimeVault-Svelte Code Generation Instructions

## DataTable Component Usage

The DataTable component provides a powerful, customizable way to display tabular data with features including sorting, pagination, searching, and hierarchical data display.

### Basic Usage

```svelte
<DataTable
  data={items}
  columns={columns}
  searchable={true}
  pageable={true}
/>
```

### Column Definition

Columns are defined as an array of objects with the following properties:

```typescript
const columns = [
  {
    key: 'name', // The property key in your data objects
    title: 'Name', // Column header text
    sortable: true, // Whether the column is sortable
    align: 'left', // Text alignment: 'left', 'right', or 'center'
    width: '200px', // Optional fixed width
    searchable: true, // Whether this field is included in searches
    cellClass: 'custom-cell-class', // Custom class for cells
    headerClass: 'custom-header-class', // Custom class for header
    
    // Optional formatter for simple text transformations
    formatter: (value, row) => value.toUpperCase(),
    
    // Optional render function for complex HTML content
    render: (value, row) => `<span class="font-bold">${value}</span>`
  }
];
```

### Hierarchical Data Display

DataTable supports hierarchical/nested data display with collapsible rows:

```svelte
<DataTable
  data={clients}
  {columns}
  nestedKey="children"
  nestedIndent={24}
  defaultCollapsed={true}
/>
```

#### Properties for Nested Data

- `nestedKey`: The property name that contains child items (e.g., "children", "subItems")
- `nestedIndent`: The indentation amount in pixels for each level
- `defaultCollapsed`: Whether nested items should start collapsed (true) or expanded (false)

#### Data Structure for Nested Content

Your data should have a structure like:

```typescript
const clients = [
  {
    id: '1',
    name: 'Parent Company',
    children: [
      {
        id: '1-1',
        name: 'Child Department 1'
      },
      {
        id: '1-2',
        name: 'Child Department 2',
        children: [
          {
            id: '1-2-1',
            name: 'Grandchild Team'
          }
        ]
      }
    ]
  }
];
```

#### Handling Nested Data Events

The DataTable component dispatches events when rows are expanded or collapsed:

```svelte
<DataTable
  // ...other props
  on:rowToggle={(event) => {
    const { id, expanded } = event.detail;
    console.log(`Row ${id} is now ${expanded ? 'expanded' : 'collapsed'}`);
  }}
/>
```

### Events

The DataTable component dispatches the following events:

- `sort`: Triggered when a column is sorted with `{key, direction}`
- `rowClick`: Triggered when a row is clicked with `{row, id}`
- `selection`: Triggered when row selection changes with `{ids, rows}`
- `pageChange`: Triggered when the current page changes with `{page}`
- `pageSizeChange`: Triggered when page size changes with `{size}`
- `rowToggle`: Triggered when a row is expanded/collapsed with `{id, expanded}`

### Slots

DataTable provides two optional slots:

- `header`: Content to display in the header area
- `footer`: Content to display in the footer area

```svelte
<DataTable {data} {columns}>
  <svelte:fragment slot="header">
    <button class="btn btn-primary">Custom Action</button>
  </svelte:fragment>
  
  <svelte:fragment slot="footer">
    <div class="flex justify-end">
      <button class="btn btn-secondary">Export</button>
    </div>
  </svelte:fragment>
</DataTable>
```

### Best Practices

1. **Performance**: For large datasets, always use pagination
2. **Nested Data**: Keep nesting to 3 levels or fewer for good UX
3. **Mobile**: Ensure important columns display first for mobile users
4. **Accessibility**: Use meaningful titles and provide adequate context
5. **Empty States**: Always define informative empty messages
6. **Text Alignment**:
   - Left-align text content
   - Right-align numeric values
   - Center icons and actions
7. **Row Selection**: Only enable selectable rows when batch actions are available
8. **Custom Rendering**: Use the render property for complex cells rather than formatters for HTML content

### Implementation Example with Nested Data

```svelte
<script lang="ts">
  import { DataTable } from '$lib/components';
  
  const clients = [
    {
      id: '1',
      name: 'Acme Corporation',
      type: 'business',
      children: [
        {
          id: '2',
          name: 'Acme Marketing',
          type: 'container'
        },
        {
          id: '3', 
          name: 'Acme Sales',
          type: 'container'
        }
      ]
    }
  ];
  
  const columns = [
    {
      key: 'name',
      title: 'Name',
      sortable: true,
      render: (value, row) => `<a href="/clients/${row.id}" class="text-blue-400">${value}</a>`
    },
    {
      key: 'type',
      title: 'Type',
      sortable: true
    },
    {
      key: 'id',
      title: 'Actions',
      align: 'right',
      render: (id) => `
        <button class="table-action-button" data-action="edit" data-id="${id}">
          Edit
        </button>
      `
    }
  ];
  
  function handleRowClick(event) {
    const { row } = event.detail;
    console.log(`Clicked on ${row.name}`);
  }
  
  function handleCellClick(event) {
    const target = event.target;
    const button = target.closest('button[data-action]');
    if (button) {
      event.stopPropagation(); // Prevent row click
      const action = button.getAttribute('data-action');
      const id = button.getAttribute('data-id');
      console.log(`Action ${action} on row ${id}`);
    }
  }
</script>

<DataTable
  data={clients}
  {columns}
  title="Client List"
  searchable={true}
  pageable={true}
  nestedKey="children"
  defaultCollapsed={true}
  on:rowClick={handleRowClick}
  on:click={handleCellClick}
/>
```

## Table Styling Guidelines